#!/usr/bin/env node
// FINAL WORKING SOLUTION - No shell dependencies
const { execSync } = require('child_process');
const path = require('path');

console.log('üöÄ Final Vite Solution - Direct Execution');

try {
  // Direct path to vite
  const vitePath = path.join(__dirname, 'node_modules', 'vite', 'bin', 'vite.js');
  console.log('üìç Using vite at:', vitePath);
  
  // Execute directly with full path
  execSync(`"${process.execPath}" "${vitePath}" --host :: --port 8080`, {
    stdio: 'inherit',
    cwd: __dirname
  });
} catch (error) {
  console.error('‚ùå Direct execution failed:', error.message);
  console.log('üîÑ Trying fallback method...');
  
  try {
    execSync('npx vite --host :: --port 8080', {
      stdio: 'inherit',
      cwd: __dirname
    });
  } catch (fallbackError) {
    console.error('‚ùå All methods failed. Error:', fallbackError.message);
    process.exit(1);
  }
}